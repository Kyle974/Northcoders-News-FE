(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(57)},28:function(e,t,a){},36:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),o=(a(28),a(1)),s=a(2),u=a(4),i=a(3),m=a(5),h=a(6),p=(a(36),function(){return r.a.createElement("header",{className:"appTitle"},r.a.createElement(h.a,{to:"/"},r.a.createElement("h1",null,"NC-News")))}),d=a(8),v=a.n(d),g="https://ncn2019.herokuapp.com/api/",f=function(e){return v.a.get("".concat(g,"articles/").concat(e))},E=function(e,t,a){return v.a.post("".concat(g,"articles/").concat(e,"/comments"),{author:t,body:a})},b=function(e,t){return v.a.patch("".concat(g).concat(e),{inc_votes:t})},j=function(e){return v.a.get("".concat(g,"users/").concat(e))},O=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={username:"jessjelly"},a.submitUserInfo=function(){j(a.state.username).then(function(e){var t=e.data;a.props.loginUser(t.user)}).catch(function(e){var t=e.response,a=t.data,n=t.status;Object(h.c)("/error",{state:{from:"/",msg:a.msg,status:n}})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.state.username),r.a.createElement("form",{className:"appLogin",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("label",null,"username:"),r.a.createElement("input",{onChange:function(t){return e.setState({username:t.target.value})},value:this.state.username}),r.a.createElement("button",{onClick:this.submitUserInfo,type:"submit"},"login"))}}]),t}(n.Component),y=function(){return r.a.createElement("div",{className:"appNavBar"},r.a.createElement("nav",null,r.a.createElement(h.a,{to:"/",className:"navBarItem"},"Home"),r.a.createElement(h.a,{to:"/articles/hottest",className:"navBarItem"},"Hottest"),r.a.createElement(h.a,{to:"/articles/best",className:"navBarItem"},"Best"),r.a.createElement(h.a,{to:"/articles/newest",className:"navBarItem"},"Newest"),r.a.createElement(h.a,{to:"/topics",className:"navBarItem"},"Topics")))},I=a(10),C=a.n(I),N=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={articles:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.articles&&r.a.createElement("ul",null,this.state.articles.map(function(e){return r.a.createElement(h.a,{key:e.article_id,to:"/articles/".concat(e.article_id)},r.a.createElement("div",{className:"article"},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,r.a.createElement("strong",null,"topic: ")," ",e.topic),r.a.createElement("p",null,r.a.createElement("strong",null," author: "),e.author,r.a.createElement("strong",null," created: "),C()(e.created_at).startOf("day").fromNow()),r.a.createElement("p",null,r.a.createElement("strong",null,"votes: ")," ",e.votes,r.a.createElement("strong",null," comments: ")," ",e.comment_count),r.a.createElement("p",null)))})))}},{key:"componentDidMount",value:function(){var e=this;f(this.props.urlPath).then(function(t){var a=t.data;return e.setState({articles:a.articles})}).catch(function(e){var t=e.response,a=t.data,n=t.status;Object(h.c)("/error",{replace:!0,state:{from:"/",msg:a.msg,status:n}})})}}]),t}(n.Component),U=function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"Welcome to NC-News!")),r.a.createElement(N,{urlPath:""}))},w=function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"Hottest"),r.a.createElement("p",null,"The most dicussed articles on NC-News.")),r.a.createElement(N,{urlPath:"?sort_by=comment_count"}))},_=function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"Best"),r.a.createElement("p",null,"The most upvoted articles on NC-News.")),r.a.createElement(N,{urlPath:"?sort_by=votes"}))},k=function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"Newest"),r.a.createElement("p",null,"The most up to the minute articles on NC-News.")),r.a.createElement(N,{urlPath:"?sort_by=created_at"}))},S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={topics:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Topics"),this.state.topics&&r.a.createElement("div",null,this.state.topics.map(function(e){return r.a.createElement(h.a,{key:e.slug,slug:e.slug,to:"/topics/".concat(e.slug)},r.a.createElement("div",{className:"topic"},r.a.createElement("h2",null,e.slug),r.a.createElement("p",null,e.description)))})))}},{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(g,"topics")).then(function(t){var a=t.data;return e.setState({topics:a.topics})}).catch(function(e){var t=e.response,a=t.data,n=t.status;Object(h.c)("/error",{replace:!0,state:{from:"/",msg:a.msg,status:n}})})}}]),t}(n.Component),D=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,e.slug),r.a.createElement(N,{urlPath:"?topic=".concat(e.slug)}),";")},A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.loggedInUser&&r.a.createElement("div",null,r.a.createElement("h1",null,"Contributers"),r.a.createElement("div",null,"users")))}},{key:"componentDidMount",value:function(){}}]),t}(n.Component),B=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={avatar_url:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.avatar_url?r.a.createElement("div",null,r.a.createElement("img",{src:this.state.avatar_url,alt:"not found"})):r.a.createElement("div",null,r.a.createElement("img",{src:"https://cdn.pixabay.com/photo/2014/10/01/10/44/hedgehog-468228_960_720.jpg",alt:"not found"})))}},{key:"componentDidMount",value:function(){var e=this;j(this.props.username).then(function(t){var a=t.data.user;return e.setState({avatar_url:a.avatar_url})}).catch(function(t){console.log(t),e.setState({avatar_url:"https://cdn.pixabay.com/photo/2014/10/01/10/44/hedgehog-468228_960_720.jpg"})})}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={voteChange:0},a.handleVote=function(e){a.state.voteChange!==e?(a.setState({voteChange:e}),b(a.props.path,e).then(function(t){return a.setState({voteChange:e})})):(a.setState({voteChange:0-e}),b(a.props.path,0-e).then(function(e){return a.setState({voteChange:0})}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.loggedInUser&&r.a.createElement("div",null,r.a.createElement("p",{className:"voteCount"},"votes: ",this.props.votes+this.state.voteChange),r.a.createElement("button",{onClick:function(){return e.handleVote(1)},disabled:1===this.state.voteChange},"upvote"),r.a.createElement("button",{onClick:function(){return e.handleVote(-1)},disabled:-1===this.state.voteChange},"downvote")))}}]),t}(n.Component),P=a(22),T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={commentInput:""},a.submitComment=function(){a.props.loggedInUser?E(a.props.article_id,a.props.loggedInUser.username,a.state.commentInput).then(function(e){var t=e.data;a.props.showNewComment(t.comment),a.setState({commentInput:""})}):console.log("a bad thing happened....")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.submitComment()}},r.a.createElement("input",{value:this.state.commentInput,onChange:function(t){return e.setState({commentInput:t.target.value})}}),r.a.createElement("button",null,"comment"))))}},{key:"componentDidMount",value:function(){this.setState({loggedInUser:this.props.loggedInUser})}}]),t}(n.Component),H=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.removeComment(e.props.comment)}},"delete comment"))}},{key:"removeComment",value:function(e){var t,a=this;(t=this.props.comment_id,v.a.delete("".concat(g,"/comments/").concat(t))).then(function(t){return a.props.removeDeletedComment(e)})}}]),t}(n.Component),J=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={comments:null},a.showNewComment=function(e){a.setState({comments:[e].concat(Object(P.a)(a.state.comments))})},a.removeDeletedComment=function(e){a.setState({comments:a.state.comments.filter(function(t){return t!==e})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.comments&&r.a.createElement("div",null,r.a.createElement(T,{article_id:this.props.article_id,showNewComment:this.showNewComment,removeDeletedComment:this.removeDeletedComment,loggedInUser:this.props.loggedInUser}),r.a.createElement("div",null,this.state.comments.map(function(t){return r.a.createElement("div",{className:"comment",key:t.comment_id},r.a.createElement("div",{className:"commentAuthor"},r.a.createElement("div",{className:"commentAvatar"},r.a.createElement(B,{username:t.author})),r.a.createElement("h3",{className:"commentAuthorInfo"},t.author)),r.a.createElement("div",{className:"commentBody"},r.a.createElement("p",null,t.body),r.a.createElement(M,{votes:t.votes,path:"comments/".concat(t.comment_id),loggedInUser:e.props.loggedInUser}),e.props.loggedInUser&&e.props.loggedInUser.username===t.author&&r.a.createElement(H,{comment:t,removeDeletedComment:e.removeDeletedComment,comment_id:t.comment_id})))}))))}},{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.article_id,v.a.get("".concat(g,"articles/").concat(e,"/comments"))).then(function(e){var a=e.data;return t.setState({comments:a.comments})})}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={article:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.article&&r.a.createElement("div",null,r.a.createElement(B,{username:this.state.article.author}),r.a.createElement("h1",null,this.state.article.title),r.a.createElement("h2",null,"by ",this.state.article.author),r.a.createElement("p",null,C()(this.state.article.created_at).startOf("day").fromNow()),r.a.createElement("p",null,this.state.article.body),r.a.createElement(M,{votes:this.state.article.votes,path:"articles/".concat(this.state.article.article_id),loggedInUser:this.props.loggedInUser}),r.a.createElement(J,{article_id:this.props.article_id,loggedInUser:this.props.loggedInUser})))}},{key:"componentDidMount",value:function(){var e=this;f(this.props.article_id).then(function(t){var a=t.data;return e.setState({article:a.article})}).catch(function(e){var t=e.response,a=t.data,n=t.status;Object(h.c)("/error",{replace:!0,state:{from:"/",msg:a.msg,status:n}})})}}]),t}(n.Component),W=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).removeUserInfo=function(){a.props.logoutUser()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"appLogin"},r.a.createElement("div",null,"Welcome ",this.props.loggedInUser.username,"!",r.a.createElement("button",{onClick:this.removeUserInfo},"logout")))}}]),t}(n.Component),x=function(){return r.a.createElement("h1",null,"Page not found")},V=function(e){var t=e.location;return r.a.createElement("div",null,t.state?r.a.createElement("div",null,r.a.createElement("h1",null,t.state.status)," ",r.a.createElement("h2",null,t.state.msg)):r.a.createElement("div",null,r.a.createElement("h1",null,"Page Not Found")))},F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={loggedInUser:null},a.loginUser=function(e){a.setState({loggedInUser:e}),sessionStorage.setItem("loggedInUser",JSON.stringify(a.state.loggedInUser))},a.logoutUser=function(){a.setState({loggedInUser:null}),sessionStorage.removeItem("loggedInUser")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"appHeader"},r.a.createElement(p,null),!this.state.loggedInUser&&r.a.createElement(O,{className:"userLogin",loginUser:this.loginUser}),this.state.loggedInUser&&r.a.createElement(W,{className:"userLogin",loggedInUser:this.state.loggedInUser,logoutUser:this.logoutUser})),r.a.createElement(y,null),r.a.createElement(h.b,{className:"appBody"},r.a.createElement(U,{path:"/"}),r.a.createElement(w,{path:"articles/hottest"}),r.a.createElement(_,{path:"articles/best"}),r.a.createElement(k,{path:"articles/newest"}),r.a.createElement(L,{path:"/articles/:article_id",loggedInUser:this.state.loggedInUser}),r.a.createElement(S,{path:"/topics"}),r.a.createElement(D,{path:"/topics/:slug"}),r.a.createElement(A,{path:"/user",user:this.state.loggedInUser}),r.a.createElement(x,{path:"/*"}),r.a.createElement(V,{path:"/error"})))}},{key:"componentDidMount",value:function(){this.setState({loggedInUser:JSON.parse(sessionStorage.getItem("loggedInUser"))})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.bb8f288e.chunk.js.map